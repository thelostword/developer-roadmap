let t=[],c=(a,o)=>{let s,i=[],l={lc:0,l:o||0,value:a,set(n){l.value=n,l.notify()},get(){return l.lc||l.listen(()=>{})(),l.value},notify(n){s=i;let r=!t.length;for(let e=0;e<s.length;e+=2)t.push(s[e],l.value,n,s[e+1]);if(r){for(let e=0;e<t.length;e+=4){let f=!1;for(let u=e+7;u<t.length;u+=4)if(t[u]<t[e+3]){f=!0;break}f?t.push(t[e],t[e+1],t[e+2],t[e+3]):t[e](t[e+1],t[e+2])}t.length=0}},listen(n,r){return i===s&&(i=i.slice()),l.lc=i.push(n,r||l.l)/2,()=>{i===s&&(i=i.slice());let e=i.indexOf(n);~e&&(i.splice(e,2),l.lc--,l.lc||l.off())}},subscribe(n,r){let e=l.listen(n,r);return n(l.value),e},off(){}};return l};const g=c("");export{g as p};
