import{_ as U,h as a,p as N}from"./hooks.module.7cc4e70a.js";import{c as H,d as G,a as q}from"./http.82ebf0f1.js";import{S as A}from"./Spinner.95905af5.js";import"./jwt.f0e0aa9c.js";import{U as j}from"./UploadProfilePicture.17097e6c.js";import{p as F}from"./page.c1a8a472.js";import{u as z}from"./use-team-id.3d0ab368.js";import{u as O}from"./use-outside-click.85d1a62f.js";import{u as R}from"./use-keydown.41d75069.js";import{o as e}from"./jsxRuntime.module.afbf92fe.js";import{k as E}from"./preact.module.7b19fc78.js";import{$ as W}from"./team.12f2469e.js";import{u as _}from"./index.c54070cf.js";import{u as B}from"./use-toast.fb52de5d.js";import"./index.a98c85f5.js";import"./toast.1fe7142d.js";function K(g){const{onClose:l}=g,h=U(null),m=U(null),[o,r]=a(!1),[d,s]=a(""),[c,b]=a(""),{teamId:y}=z();O(h,()=>{l()}),R("Escape",()=>{l()}),N(()=>{m.current?.focus()},[]);const x=async u=>{if(u.preventDefault(),r(!0),s(""),c.toUpperCase()!=="DELETE"){s("Verification text does not match"),r(!1);return}const{response:v,error:p}=await H(`https://api.roadmap.sh/v1-delete-team/${y}`);if(p||!v){r(!1),s(p?.message||"Something went wrong");return}window.location.href="/account"},w=()=>{r(!1),s(""),b(""),l()};return e(E,{children:e("div",{class:"fixed left-0 right-0 top-0 z-50 flex h-full items-center justify-center overflow-y-auto overflow-x-hidden bg-black/50",children:e("div",{class:"relative h-full w-full max-w-md p-4 md:h-auto",children:e("div",{ref:h,class:"popup-body relative rounded-lg bg-white p-4 shadow",children:[e("p",{children:"This will permanently delete your account and all your associated data including your progress."}),e("p",{class:"-mb-2 mt-3 text-base font-medium text-black",children:'Please type "delete" to confirm.'}),e("form",{onSubmit:x,children:[e("div",{className:"my-4",children:[e("input",{ref:m,type:"text",name:"delete-account",id:"delete-account",className:"mt-2 block w-full rounded-md border border-gray-300 px-3 py-2 outline-none placeholder:text-gray-400 focus:border-gray-400",placeholder:'Type "delete" to confirm',required:!0,autoFocus:!0,value:c,onInput:u=>b(u.target.value)}),d&&e("p",{className:"mt-2 rounded-lg bg-red-100 p-2 text-red-700",children:d})]}),e("div",{className:"flex items-center gap-2",children:[e("button",{type:"button",disabled:o,onClick:w,className:"flex-grow cursor-pointer rounded-lg bg-gray-200 py-2 text-center",children:"Cancel"}),e("button",{type:"submit",disabled:o||c.toUpperCase()!=="DELETE",className:"flex-grow cursor-pointer rounded-lg bg-red-500 py-2 text-white disabled:opacity-40",children:o?"Please wait ..":"Confirm"})]})]})]})})})})}function de(){const[g,l]=a(!1),[h,m]=a(!1),o=_(W),r=B(),[d,s]=a(""),[c,b]=a(""),[y,x]=a(""),[w,u]=a(""),[v,p]=a(""),[i,T]=a(""),[I,S]=a("");a([]),a([]);const L=["0-1","2-10","11-50","51-200","201-500","501-1000","1000+"],[n,$]=a(!1),{teamId:f}=z();N(()=>{$(!o)},[o]);const P=async t=>{if(t.preventDefault(),l(!0),!d||!i){l(!1);return}const{response:k,error:D}=await G(`https://api.roadmap.sh/v1-update-team/${f}`,{name:d,website:y,type:i,gitHubUrl:v||void 0,...i==="company"&&{teamSize:I,linkedInUrl:w||void 0}});if(D){l(!1),r.error(D.message||"Something went wrong");return}k&&(await C(),l(!1),r.success("Team updated successfully"))};async function C(){const{response:t,error:k}=await q(`https://api.roadmap.sh/v1-get-team/${f}`);if(k||!t){console.log(k);return}s(t.name),b(t.avatar||""),x(t?.links?.website||""),u(t?.links?.linkedIn||""),p(t?.links?.github||""),T(t.type),t.teamSize&&S(t.teamSize)}return N(()=>{f&&C().finally(()=>{F.set("")})},[f]),e("div",{children:[e(j,{isDisabled:n,type:"logo",avatarUrl:c?`https://dodrc8eu8m09s.cloudfront.net/avatars/${c}`:"/images/default-avatar.png",teamId:f}),e("form",{onSubmit:P,children:[e("div",{className:"mt-4 flex w-full flex-col",children:[e("label",{for:"name",className:'text-sm leading-none text-slate-500 after:text-red-400 after:content-["*"]',children:"Name"}),e("input",{type:"text",name:"name",id:"name",className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"roadmap.sh",disabled:n,required:!0,value:d,onInput:t=>s(t.target.value)})]}),e("div",{className:"mt-4 flex w-full flex-col",children:[e("label",{for:"website",className:"text-sm leading-none text-slate-500",children:"Website"}),e("input",{type:"text",name:"website",id:"website",className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"https://roadmap.sh",disabled:n,value:y,onInput:t=>x(t.target.value)})]}),i==="company"&&e("div",{className:"mt-4 flex w-full flex-col",children:[e("label",{for:"linkedIn",className:"text-sm leading-none text-slate-500",children:"LinkedIn URL"}),e("input",{type:"text",name:"linkedIn",id:"linkedIn",className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"https://linkedin.com/company/roadmapsh",disabled:n,value:w,onInput:t=>u(t.target.value)})]}),e("div",{className:"mt-4 flex w-full flex-col",children:[e("label",{for:"gitHub",className:"text-sm leading-none text-slate-500",children:"GitHub URL"}),e("input",{type:"text",name:"gitHub",id:"gitHub",className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"https://github.com/roadmapsh",disabled:n,value:v,onInput:t=>p(t.target.value)})]}),e("div",{className:"mt-4 flex w-full flex-col",children:[e("label",{for:"type",className:'text-sm leading-none text-slate-500  after:text-red-400 after:content-["*"]',children:"Type"}),e("select",{name:"type",id:"type",className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",disabled:n,value:i,onChange:t=>T(t.target.value),children:[e("option",{value:"",selected:!0,children:"Select type"}),e("option",{value:"company",children:"Company"}),e("option",{value:"study_group",children:"Study Group"})]})]}),i==="company"&&e("div",{className:"mt-4 flex w-full flex-col",children:[e("label",{for:"team-size",className:'text-sm leading-none text-slate-500 after:text-red-400 after:content-["*"]',children:"Team size"}),e("select",{name:"team-size",id:"team-size",className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",required:i==="company",disabled:n,value:I,onChange:t=>S(t.target.value),children:[e("option",{value:"",selected:!0,children:"Select team size"}),L.map(t=>e("option",{value:t,children:[t," people"]}))]})]}),e("div",{className:"mt-4 flex w-full flex-col",children:e("button",{type:"submit",className:"inline-flex h-11 w-full items-center justify-center rounded-lg bg-black p-2 py-3 text-sm font-medium text-white outline-none focus:ring-2 focus:ring-black focus:ring-offset-1 disabled:bg-gray-400",disabled:n||g,children:g?e(A,{}):"Update"})})]}),!o&&e("p",{className:"mt-2 rounded-lg border border-red-300 bg-red-50 p-2 text-sm text-red-700",children:"Only team admins can update team information."}),o&&e(E,{children:[e("hr",{class:"my-8"}),h&&e(K,{onClose:()=>{r.success("Team deleted successfully"),m(!1)}}),e("h2",{class:"text-xl font-bold sm:text-2xl",children:"Delete Team"}),e("p",{class:"mt-2 text-gray-400",children:"Permanently delete this team and all of its resources."}),e("button",{onClick:()=>m(!0),"data-popup":"delete-team-popup",class:"font-regular mt-4 w-full rounded-lg bg-red-600 py-2 text-base text-white outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1",children:"Delete Team"})]})]})}export{de as UpdateTeamForm};
